(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{227:function(t,e,r){"use strict";var n=r(2),o=(r(26),r(238).a.create({baseURL:"http://localhost:8000/api/products",headers:{"Content-Type":"application/json"}})),c=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.get("/"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.get("/".concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.post("/",e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.put("/".concat(e),r));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),m=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.delete("/".concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.get("/search",{params:{q:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.put("/".concat(e,"/rating"),{rating:r}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();e.a={getAllProducts:c,getProductById:d,createProduct:l,updateProduct:v,deleteProduct:m,searchProducts:f,updateProductRating:h}},237:function(t,e,r){var content=r(244);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("7575c5af",content,!0,{sourceMap:!1})},243:function(t,e,r){"use strict";r(237)},244:function(t,e,r){var n=r(22)((function(i){return i[1]}));n.push([t.i,".rating-container[data-v-21e13e64]{margin-top:20px}.rating-stars[data-v-21e13e64]{font-size:24px}.rating-stars .fa-star[data-v-21e13e64]{color:gold;font-size:24px}",""]),n.locals={},t.exports=n},247:function(t,e,r){"use strict";r.r(e);r(49),r(27);var n=r(2),o=(r(26),r(227)),c={name:"product_detail-id",data:function(){return{product:null,addToCartLabel:"Add to cart",removeFromCartLabel:"Remove from cart",addToFavouriteLabel:"Add to favourite",removeFromFavouriteLabel:"Remove from favourite",selected:1,quantityArray:[],currentRating:3}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$route.params.id,e.prev=1,e.next=4,o.a.getProductById(r);case 4:n=e.sent,t.product=n.data,t.currentRating=t.product.ratings||0,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Erreur lors de la récupération des détails du produit :",e.t0);case 12:for(i=1;i<=20;i++)t.quantityArray.push(i);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},methods:{addToCart:function(t){var data={id:t,status:!0};this.$store.commit("addToCart",t),this.$store.commit("setAddedBtn",data)},removeFromCart:function(t){var data={id:t,status:!1};this.$store.commit("removeFromCart",t),this.$store.commit("setAddedBtn",data)},saveToFavorite:function(t){this.$store.state.userInfo.isLoggedIn?this.$store.commit("addToFavourite",t):this.$store.commit("showLoginModal",!0)},removeFromFavourite:function(t){this.$store.commit("removeFromFavourite",t)},onSelectQuantity:function(t){var data={id:t,quantity:this.selected};this.$store.commit("quantity",data)},rateProduct:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.a.updateProductRating(e.product.id,t);case 3:e.currentRating=t,r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),console.error("Erreur lors de la mise à jour de la note du produit :",r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},getImageUrl:function(t){return"http://localhost:8000/".concat(t)}}},d=(r(243),r(11)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return t.product?e("div",[e("div",{staticClass:"rounded-2xl shadow-custom bg-white p-4"},[e("div",{staticClass:"img-wrapper rounded-t-2xl"},[t.product.image_url?e("img",{staticClass:"rounded-2xl",attrs:{src:t.getImageUrl(t.product.image_url),alt:"Image du produit"}}):t._e()]),t._v(" "),e("div",{staticClass:"text-wrapper p-4"},[e("div",{staticClass:"flex items-center justify-between mb-3"},[e("div",{staticClass:"media-content"},[e("span",{staticClass:"text-3xl font-medium"},[t._v(t._s(t.product.product_name))])]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.product.isFavourite,expression:"product.isFavourite"}],staticClass:"button text-lg",attrs:{title:t.removeFromFavouriteLabel},on:{click:function(e){return t.removeFromFavourite(t.product.id)}}},[t._m(0)]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.product.isFavourite,expression:"!product.isFavourite"}],staticClass:"button text-lg",attrs:{title:t.addToFavouriteLabel},on:{click:function(e){return t.saveToFavorite(t.product.id)}}},[t._m(1)])]),t._v(" "),e("p",{staticClass:"text-2xl"},[t._v(t._s(t.product.description))]),t._v(" "),e("div",{staticClass:"flex justify-between"},[e("div",{staticClass:"flex items-center"},[t._l(Math.round(t.product.ratings),(function(t){return e("i",{key:"stars-".concat(t),staticClass:"fa fa-star text-gold"})})),t._v(" "),e("p",{staticClass:"ml-2 text-lg"},[t._v(t._s(t.product.reviews>0?"".concat(t.product.reviews," Reviews"):"No reviews"))])],2),t._v(" "),e("p",{staticClass:"text-3xl font-medium"},[e("strong",[t._v(t._s(t.product.price)+" Ar")])])]),t._v(" "),e("div",{staticClass:"mt-4"},[e("p",{staticClass:"text-lg font-medium"},[t._v("Available Quantity: "+t._s(t.product.quantity))])]),t._v(" "),e("div",{staticClass:"flex justify-between mt-5 items-center"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"p-2 border-2 rounded-2xl",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selected=e.target.multiple?r:r[0]},function(e){return t.onSelectQuantity(t.product.id)}]}},t._l(t.quantityArray,(function(r){return e("option",{key:r,domProps:{value:r}},[t._v("\n              "+t._s(r)+"\n            ")])})),0),t._v(" "),t.product.isAddedToCart?t._e():e("button",{staticClass:"rounded-xl p-3 bg-blue text-white",on:{click:function(e){return t.addToCart(t.product.id)}}},[t._v("\n            "+t._s(t.addToCartLabel)+"\n          ")]),t._v(" "),t.product.isAddedToCart?e("button",{staticClass:"rounded-xl p-3",on:{click:function(e){return t.removeFromCart(t.product.id)}}},[t._v("\n            "+t._s(t.removeFromCartLabel)+"\n          ")]):t._e()]),t._v(" "),e("div",{staticClass:"rating-container mt-4"},[e("p",{staticClass:"text-lg font-medium"},[t._v("Rate this product:")]),t._v(" "),e("div",{staticClass:"rating-stars flex"},t._l(5,(function(r){return e("i",{key:r,staticClass:"fa",class:r<=t.currentRating?"fa-star text-gold":"fa-star-o text-gray-400",on:{click:function(e){return t.rateProduct(r)}}})})),0),t._v(" "),e("p",{staticClass:"mt-2"},[t._v("Current rating: "+t._s(t.currentRating))])])])])]):t._e()}),[function(){var t=this._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"fas fa-heart text-red"})])},function(){var t=this._self._c;return t("span",{staticClass:"icon"},[t("i",{staticClass:"far fa-heart text-red"})])}],!1,null,"21e13e64",null);e.default=component.exports}}]);